"use strict";(()=>{var e={};e.id=122,e.ids=[122],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3263:e=>{e.exports=import("firebase-admin/app")},2929:e=>{e.exports=import("firebase-admin/firestore")},111:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{originalPathname:()=>m,patchFetch:()=>c,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l});var r=s(9303),o=s(8716),n=s(670),p=s(6941),i=e([p]);p=(i.then?(await i)():i)[0];let u=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/approve-message/route",pathname:"/api/approve-message",filename:"route",bundlePath:"app/api/approve-message/route"},resolvedPagePath:"/Users/tan135/thankyouthomas/app/api/approve-message/route.ts",nextConfigOutput:"",userland:p}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:g}=u,m="/api/approve-message/route";function c(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}a()}catch(e){a(e)}})},6941:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{POST:()=>p});var r=s(7070),o=s(7096),n=e([o]);async function p(e){try{let{messageId:t}=await e.json();if(!t)return r.NextResponse.json({success:!1,error:"Message ID is required"},{status:400});let s=await o.db.collection("responses").doc(t).get();if(!s.exists)return r.NextResponse.json({success:!1,error:"Message not found"},{status:404});let a=s.data();return await o.db.collection("responses").doc(t).update({isApproved:!0,approvedAt:new Date().toISOString()}),console.log(`Message approved for ${a?.email}:`,{name:a?.name,email:a?.email,message:a?.message?.substring(0,100)+"..."}),r.NextResponse.json({success:!0,message:"Message approved and notification sent!"})}catch(e){return console.error("Error approving message:",e),r.NextResponse.json({success:!1,error:"Failed to approve message"},{status:500})}}o=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},7096:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{db:()=>i});var r=s(3263),o=s(2929),n=e([r,o]);[r,o]=n.then?(await n)():n;let p={type:"service_account",project_id:process.env.FIREBASE_PROJECT_ID,private_key_id:process.env.FIREBASE_PRIVATE_KEY_ID,private_key:process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n"),client_email:process.env.FIREBASE_CLIENT_EMAIL,client_id:process.env.FIREBASE_CLIENT_ID,auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://oauth2.googleapis.com/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_x509_cert_url:`https://www.googleapis.com/robot/v1/metadata/x509/${process.env.FIREBASE_CLIENT_EMAIL}`};(0,r.getApps)().length||(0,r.initializeApp)({credential:(0,r.cert)(p)});let i=(0,o.getFirestore)();a()}catch(e){a(e)}})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,972],()=>s(111));module.exports=a})();