"use strict";(()=>{var e={};e.id=460,e.ids=[460],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3263:e=>{e.exports=import("firebase-admin/app")},2929:e=>{e.exports=import("firebase-admin/firestore")},573:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{originalPathname:()=>m,patchFetch:()=>c,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>h});var s=a(9303),o=a(8716),n=a(670),p=a(6738),i=e([p]);p=(i.then?(await i)():i)[0];let d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/approved-messages/route",pathname:"/api/approved-messages",filename:"route",bundlePath:"app/api/approved-messages/route"},resolvedPagePath:"/Users/tan135/thankyouthomas/app/api/approved-messages/route.ts",nextConfigOutput:"",userland:p}),{requestAsyncStorage:u,staticGenerationAsyncStorage:h,serverHooks:l}=d,m="/api/approved-messages/route";function c(){return(0,n.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:h})}r()}catch(e){r(e)}})},6738:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{GET:()=>p});var s=a(7070),o=a(7096),n=e([o]);async function p(){try{let e=o.db.collection("responses"),t=(await e.where("isApproved","==",!0).get()).docs.map(e=>{let t=e.data();return{id:e.id,message:t.message,name:t.name,isAnonymous:t.isAnonymous,imageUrl:t.imageUrl,createdAt:t.createdAt}}),a=s.NextResponse.json({success:!0,messages:t});return a.headers.set("Cache-Control","no-cache, no-store, must-revalidate"),a.headers.set("Pragma","no-cache"),a.headers.set("Expires","0"),a}catch(t){console.error("Error fetching approved messages:",t);let e=s.NextResponse.json({success:!1,error:"Failed to fetch messages"},{status:500});return e.headers.set("Cache-Control","no-cache, no-store, must-revalidate"),e.headers.set("Pragma","no-cache"),e.headers.set("Expires","0"),e}}o=(n.then?(await n)():n)[0],r()}catch(e){r(e)}})},7096:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{db:()=>i});var s=a(3263),o=a(2929),n=e([s,o]);[s,o]=n.then?(await n)():n;let p={type:"service_account",project_id:process.env.FIREBASE_PROJECT_ID,private_key_id:process.env.FIREBASE_PRIVATE_KEY_ID,private_key:process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n"),client_email:process.env.FIREBASE_CLIENT_EMAIL,client_id:process.env.FIREBASE_CLIENT_ID,auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://oauth2.googleapis.com/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_x509_cert_url:`https://www.googleapis.com/robot/v1/metadata/x509/${process.env.FIREBASE_CLIENT_EMAIL}`};(0,s.getApps)().length||(0,s.initializeApp)({credential:(0,s.cert)(p)});let i=(0,o.getFirestore)();r()}catch(e){r(e)}})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,972],()=>a(573));module.exports=r})();